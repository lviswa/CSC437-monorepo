<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Desi Threads</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&family=Playfair+Display:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Global CSS -->
  <link rel="stylesheet" href="/styles/reset.css" />
  <link rel="stylesheet" href="/styles/tokens.css" />
  <link rel="stylesheet" href="/styles/page.css" />

  <!-- Lit + Mustang entry point -->
  <script type="module" crossorigin src="/assets/index-ZT8yCmJE.js"></script>
</head>

<body>
  <!-- Provide all contexts -->
  <mu-context></mu-context>

  <!-- Corrected Provider Nesting Order -->
  <mu-auth provides="desi:auth" redirect="/app/login">
    <mu-history provides="desi:history">
      <mu-store provides="desi:model">
        <article class="page">
          <!-- Header -->
          <header class="site-header">
            <div class="logo-container">
              <a href="/app" class="logo-link">
                <img src="/assets/logo.png" class="logo-img" alt="Cultura Logo" />
                <h1 class="site-title">DESI THREADS</h1>
              </a>
            </div>

            <nav class="nav-links">
              <a href="/app">Home</a>
              <a href="/app/women">Women</a>
              <a href="/app/men">Men</a>
              <a href="/app/accessories">Accessories</a>
            </nav>

            <div class="icon-buttons">
              <a href="#" class="icon-button">
                <svg class="icon"><use href="/icons/ui.svg#icon-cart" /></svg>
              </a>
              <a href="/app" class="icon-button">
                <svg class="icon"><use href="/icons/ui.svg#icon-home" /></svg>
              </a>
              <a href="/app/profile" class="icon-button">
                <svg class="icon icon-user">
                  <use href="/icons/ui.svg#icon-user" />
                </svg>
              </a>
            </div>

            <!-- Dark Mode -->
            <label id="dark-mode-toggle" class="dark-mode-switch">
              <input type="checkbox" autocomplete="off" />
              Dark Mode
            </label>
          </header>

          <!-- View Renderer -->
          <mu-switch></mu-switch>
        </article>
      </mu-store>
    </mu-history>
  </mu-auth>

  <!-- Optional JS -->
  <script type="module" src="/scripts/dark-mode.js"></script>
</body>
</html>
